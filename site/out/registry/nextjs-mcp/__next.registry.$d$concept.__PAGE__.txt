1:"$Sreact.fragment"
7:I[27655,["/_next/static/chunks/ab30cffd95057725.js"],"PlatformTabs"]
b:I[71831,["/_next/static/chunks/e57f8bd634e3e83c.js","/_next/static/chunks/152d0cd9196fc828.js"],"OutletBoundary"]
c:"$Sreact.suspense"
0:{"buildId":"T1sLIVYbo5pn_m7lacbGI","rsc":["$","$1","c",{"children":[["$","main",null,{"className":"min-h-screen bg-background","children":["$","div",null,{"className":"mx-auto flex w-full max-w-6xl flex-col gap-10 px-6 py-16","children":[["$","header",null,{"className":"space-y-4","children":[["$","p",null,{"className":"text-sm font-semibold uppercase tracking-wide text-muted-foreground","children":"Concept"}],["$","div",null,{"className":"space-y-3","children":[["$","h1",null,{"className":"text-3xl font-semibold tracking-tight","children":"Next.js MCP"}],["$","p",null,{"className":"text-muted-foreground","children":"Install the Next.js DevTools MCP server for OpenCode."}]]}],["$","div",null,{"className":"flex flex-wrap gap-2","children":[["$","div","mcp",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium transition-colors text-foreground","children":"mcp"}],["$","div","nextjs",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium transition-colors text-foreground","children":"nextjs"}],["$","div","opencode",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium transition-colors text-foreground","children":"opencode"}],["$","div","devtools",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium transition-colors text-foreground","children":"devtools"}],["$","div","config",{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium transition-colors text-foreground","children":"config"}]]}]]}],["$","section",null,{"className":"grid gap-8 lg:grid-cols-[1.2fr_0.8fr]","children":[["$","div",null,{"className":"space-y-6","children":[["$","div",null,{"className":"rounded-xl border bg-card text-card-foreground shadow-sm","children":[["$","div",null,{"className":"flex flex-col space-y-1.5 p-6","children":[["$","h3",null,{"className":"text-lg font-semibold leading-none","children":"Why teams adopt it"}],["$","p",null,{"className":"text-sm text-muted-foreground","children":"The outcomes this concept is designed to unlock."}]]}],["$","div",null,{"className":"p-6 pt-0","children":["$","ul",null,{"className":"space-y-2 text-sm text-muted-foreground","children":[["$","li","Expose dev-server diagnostics to OpenCode agents.",{"children":["• ","Expose dev-server diagnostics to OpenCode agents."]}],["$","li","Centralize MCP config with a repeatable install flow.",{"children":["• ","Centralize MCP config with a repeatable install flow."]}],["$","li","Keep MCP config consistent across projects.",{"children":["• ","Keep MCP config consistent across projects."]}]]}]}]]}],["$","div",null,{"className":"rounded-xl border bg-card text-card-foreground shadow-sm","children":[["$","div",null,{"className":"flex flex-col space-y-1.5 p-6","children":[["$","h3",null,{"className":"text-lg font-semibold leading-none","children":"What ships with it"}],["$","p",null,{"className":"text-sm text-muted-foreground","children":"Core capabilities included in the OpenCode variant."}]]}],["$","div",null,{"className":"p-6 pt-0","children":["$","ul",null,{"className":"space-y-2 text-sm text-muted-foreground","children":[["$","li","A reusable merge script that updates opencode.json/jsonc.",{"children":["• ","A reusable merge script that updates opencode.json/jsonc."]}],["$","li","A payload file that registers next-devtools-mcp as a local MCP server.",{"children":["• ","A payload file that registers next-devtools-mcp as a local MCP server."]}]]}]}]]}],["$","div",null,{"className":"rounded-xl border bg-card text-card-foreground shadow-sm","children":[["$","div",null,{"className":"flex flex-col space-y-1.5 p-6","children":["$","h3",null,{"className":"text-lg font-semibold leading-none","children":"Common use cases"}]}],["$","div",null,{"className":"p-6 pt-0","children":["$","ul",null,{"className":"space-y-2 text-sm text-muted-foreground","children":[["$","li","Enable OpenCode to read Next.js errors and logs during dev.",{"children":["• ","Enable OpenCode to read Next.js errors and logs during dev."]}],"$L2","$L3"]}]}]]}]]}],"$L4"]}]]}]}],["$L5"],"$L6"]}],"loading":null,"isPartial":false}
2:["$","li","Query routes and page metadata directly from the dev server.",{"children":["• ","Query routes and page metadata directly from the dev server."]}]
3:["$","li","Share a consistent MCP setup across teams and repos.",{"children":["• ","Share a consistent MCP setup across teams and repos."]}]
8:T3473,#!/usr/bin/env node
import { createRequire } from "node:module";
var __create = Object.create;
var __getProtoOf = Object.getPrototypeOf;
var __defProp = Object.defineProperty;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __toESM = (mod, isNodeMode, target) => {
  target = mod != null ? __create(__getProtoOf(mod)) : {};
  const to = isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target;
  for (let key of __getOwnPropNames(mod))
    if (!__hasOwnProp.call(to, key))
      __defProp(to, key, {
        get: () => mod[key],
        enumerable: true
      });
  return to;
};
var __commonJS = (cb, mod) => () => (mod || cb((mod = { exports: {} }).exports, mod), mod.exports);
var __require = /* @__PURE__ */ createRequire(import.meta.url);

// node_modules/.bun/jsonc-parser@3.3.1/node_modules/jsonc-parser/lib/umd/main.js
var require_main = __commonJS((exports, module) => {
  (function(factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
      var v = factory(__require, exports);
      if (v !== undefined)
        module.exports = v;
    } else if (typeof define === "function" && define.amd) {
      define(["require", "exports", "./impl/format", "./impl/edit", "./impl/scanner", "./impl/parser"], factory);
    }
  })(function(require2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    exports2.applyEdits = exports2.modify = exports2.format = exports2.printParseErrorCode = exports2.ParseErrorCode = exports2.stripComments = exports2.visit = exports2.getNodeValue = exports2.getNodePath = exports2.findNodeAtOffset = exports2.findNodeAtLocation = exports2.parseTree = exports2.parse = exports2.getLocation = exports2.SyntaxKind = exports2.ScanError = exports2.createScanner = undefined;
    const formatter = require2("./impl/format");
    const edit = require2("./impl/edit");
    const scanner = require2("./impl/scanner");
    const parser = require2("./impl/parser");
    exports2.createScanner = scanner.createScanner;
    var ScanError;
    (function(ScanError2) {
      ScanError2[ScanError2["None"] = 0] = "None";
      ScanError2[ScanError2["UnexpectedEndOfComment"] = 1] = "UnexpectedEndOfComment";
      ScanError2[ScanError2["UnexpectedEndOfString"] = 2] = "UnexpectedEndOfString";
      ScanError2[ScanError2["UnexpectedEndOfNumber"] = 3] = "UnexpectedEndOfNumber";
      ScanError2[ScanError2["InvalidUnicode"] = 4] = "InvalidUnicode";
      ScanError2[ScanError2["InvalidEscapeCharacter"] = 5] = "InvalidEscapeCharacter";
      ScanError2[ScanError2["InvalidCharacter"] = 6] = "InvalidCharacter";
    })(ScanError || (exports2.ScanError = ScanError = {}));
    var SyntaxKind;
    (function(SyntaxKind2) {
      SyntaxKind2[SyntaxKind2["OpenBraceToken"] = 1] = "OpenBraceToken";
      SyntaxKind2[SyntaxKind2["CloseBraceToken"] = 2] = "CloseBraceToken";
      SyntaxKind2[SyntaxKind2["OpenBracketToken"] = 3] = "OpenBracketToken";
      SyntaxKind2[SyntaxKind2["CloseBracketToken"] = 4] = "CloseBracketToken";
      SyntaxKind2[SyntaxKind2["CommaToken"] = 5] = "CommaToken";
      SyntaxKind2[SyntaxKind2["ColonToken"] = 6] = "ColonToken";
      SyntaxKind2[SyntaxKind2["NullKeyword"] = 7] = "NullKeyword";
      SyntaxKind2[SyntaxKind2["TrueKeyword"] = 8] = "TrueKeyword";
      SyntaxKind2[SyntaxKind2["FalseKeyword"] = 9] = "FalseKeyword";
      SyntaxKind2[SyntaxKind2["StringLiteral"] = 10] = "StringLiteral";
      SyntaxKind2[SyntaxKind2["NumericLiteral"] = 11] = "NumericLiteral";
      SyntaxKind2[SyntaxKind2["LineCommentTrivia"] = 12] = "LineCommentTrivia";
      SyntaxKind2[SyntaxKind2["BlockCommentTrivia"] = 13] = "BlockCommentTrivia";
      SyntaxKind2[SyntaxKind2["LineBreakTrivia"] = 14] = "LineBreakTrivia";
      SyntaxKind2[SyntaxKind2["Trivia"] = 15] = "Trivia";
      SyntaxKind2[SyntaxKind2["Unknown"] = 16] = "Unknown";
      SyntaxKind2[SyntaxKind2["EOF"] = 17] = "EOF";
    })(SyntaxKind || (exports2.SyntaxKind = SyntaxKind = {}));
    exports2.getLocation = parser.getLocation;
    exports2.parse = parser.parse;
    exports2.parseTree = parser.parseTree;
    exports2.findNodeAtLocation = parser.findNodeAtLocation;
    exports2.findNodeAtOffset = parser.findNodeAtOffset;
    exports2.getNodePath = parser.getNodePath;
    exports2.getNodeValue = parser.getNodeValue;
    exports2.visit = parser.visit;
    exports2.stripComments = parser.stripComments;
    var ParseErrorCode;
    (function(ParseErrorCode2) {
      ParseErrorCode2[ParseErrorCode2["InvalidSymbol"] = 1] = "InvalidSymbol";
      ParseErrorCode2[ParseErrorCode2["InvalidNumberFormat"] = 2] = "InvalidNumberFormat";
      ParseErrorCode2[ParseErrorCode2["PropertyNameExpected"] = 3] = "PropertyNameExpected";
      ParseErrorCode2[ParseErrorCode2["ValueExpected"] = 4] = "ValueExpected";
      ParseErrorCode2[ParseErrorCode2["ColonExpected"] = 5] = "ColonExpected";
      ParseErrorCode2[ParseErrorCode2["CommaExpected"] = 6] = "CommaExpected";
      ParseErrorCode2[ParseErrorCode2["CloseBraceExpected"] = 7] = "CloseBraceExpected";
      ParseErrorCode2[ParseErrorCode2["CloseBracketExpected"] = 8] = "CloseBracketExpected";
      ParseErrorCode2[ParseErrorCode2["EndOfFileExpected"] = 9] = "EndOfFileExpected";
      ParseErrorCode2[ParseErrorCode2["InvalidCommentToken"] = 10] = "InvalidCommentToken";
      ParseErrorCode2[ParseErrorCode2["UnexpectedEndOfComment"] = 11] = "UnexpectedEndOfComment";
      ParseErrorCode2[ParseErrorCode2["UnexpectedEndOfString"] = 12] = "UnexpectedEndOfString";
      ParseErrorCode2[ParseErrorCode2["UnexpectedEndOfNumber"] = 13] = "UnexpectedEndOfNumber";
      ParseErrorCode2[ParseErrorCode2["InvalidUnicode"] = 14] = "InvalidUnicode";
      ParseErrorCode2[ParseErrorCode2["InvalidEscapeCharacter"] = 15] = "InvalidEscapeCharacter";
      ParseErrorCode2[ParseErrorCode2["InvalidCharacter"] = 16] = "InvalidCharacter";
    })(ParseErrorCode || (exports2.ParseErrorCode = ParseErrorCode = {}));
    function printParseErrorCode(code) {
      switch (code) {
        case 1:
          return "InvalidSymbol";
        case 2:
          return "InvalidNumberFormat";
        case 3:
          return "PropertyNameExpected";
        case 4:
          return "ValueExpected";
        case 5:
          return "ColonExpected";
        case 6:
          return "CommaExpected";
        case 7:
          return "CloseBraceExpected";
        case 8:
          return "CloseBracketExpected";
        case 9:
          return "EndOfFileExpected";
        case 10:
          return "InvalidCommentToken";
        case 11:
          return "UnexpectedEndOfComment";
        case 12:
          return "UnexpectedEndOfString";
        case 13:
          return "UnexpectedEndOfNumber";
        case 14:
          return "InvalidUnicode";
        case 15:
          return "InvalidEscapeCharacter";
        case 16:
          return "InvalidCharacter";
      }
      return "<unknown ParseErrorCode>";
    }
    exports2.printParseErrorCode = printParseErrorCode;
    function format(documentText, range, options) {
      return formatter.format(documentText, range, options);
    }
    exports2.format = format;
    function modify(text, path, value, options) {
      return edit.setProperty(text, path, value, options);
    }
    exports2.modify = modify;
    function applyEdits(text, edits) {
      let sortedEdits = edits.slice(0).sort((a, b) => {
        const diff = a.offset - b.offset;
        if (diff === 0) {
          return a.length - b.length;
        }
        return diff;
      });
      let lastModifiedOffset = text.length;
      for (let i = sortedEdits.length - 1;i >= 0; i--) {
        let e = sortedEdits[i];
        if (e.offset + e.length <= lastModifiedOffset) {
          text = edit.applyEdit(text, e);
        } else {
          throw new Error("Overlapping edit");
        }
        lastModifiedOffset = e.offset;
      }
      return text;
    }
    exports2.applyEdits = applyEdits;
  });
});

// scripts/merge-mcp.ts
var import_jsonc_parser = __toESM(require_main(), 1);
import fs from "node:fs";
import path from "node:path";
var args = process.argv.slice(2);
var options = {
  keep: false,
  force: false
};
var payloadArgs = [];
for (const arg of args) {
  if (arg === "--keep") {
    options.keep = true;
    continue;
  }
  if (arg === "--force") {
    options.force = true;
    continue;
  }
  if (arg.startsWith("-")) {
    console.error(`Unknown option: ${arg}`);
    process.exit(1);
  }
  payloadArgs.push(arg);
}
function detectEol(text) {
  return text.includes(`\r
`) ? `\r
` : `
`;
}
function parseJsonc(text, label) {
  const errors = [];
  const data = import_jsonc_parser.parse(text, errors, { allowTrailingComma: true, disallowComments: false });
  if (errors.length) {
    const first = errors[0];
    throw new Error(`Failed to parse ${label} at offset ${first.offset}.`);
  }
  if (!data || typeof data !== "object") {
    throw new Error(`Expected ${label} to be an object.`);
  }
  return data;
}
function readPayload(filePath) {
  const raw = fs.readFileSync(filePath, "utf8");
  const data = parseJsonc(raw, filePath);
  return data;
}
function resolvePayloads(cwd, explicit) {
  if (explicit.length) {
    return explicit.map((item) => path.resolve(cwd, item));
  }
  const payloadDir = path.join(cwd, ".opencode", "mcp");
  if (!fs.existsSync(payloadDir)) {
    return [];
  }
  const entries = fs.readdirSync(payloadDir, { withFileTypes: true });
  return entries.filter((entry) => entry.isFile() && (entry.name.endsWith(".json") || entry.name.endsWith(".jsonc"))).map((entry) => path.join(payloadDir, entry.name));
}
function getConfigPath(cwd) {
  const jsoncPath = path.join(cwd, "opencode.jsonc");
  if (fs.existsSync(jsoncPath))
    return jsoncPath;
  return path.join(cwd, "opencode.json");
}
function ensureDir(dirPath) {
  fs.mkdirSync(dirPath, { recursive: true });
}
function main() {
  const cwd = process.cwd();
  const payloadFiles = resolvePayloads(cwd, payloadArgs);
  if (!payloadFiles.length) {
    console.log("No MCP payloads found. Nothing to merge.");
    return;
  }
  const payloads = payloadFiles.map((filePath) => ({ filePath, payload: readPayload(filePath) }));
  const mcpEntries = [];
  for (const { filePath, payload } of payloads) {
    if (!payload.mcp || typeof payload.mcp !== "object") {
      console.warn(`Skipping ${filePath}: missing mcp object.`);
      continue;
    }
    for (const [name, entry] of Object.entries(payload.mcp)) {
      if (!entry || typeof entry !== "object") {
        console.warn(`Skipping ${filePath}: mcp.${name} is not an object.`);
        continue;
      }
      mcpEntries.push([name, entry]);
    }
  }
  if (!mcpEntries.length) {
    console.log("No valid MCP entries found. Nothing to merge.");
    return;
  }
  const configPath = getConfigPath(cwd);
  const configExists = fs.existsSync(configPath);
  let configText = configExists ? fs.readFileSync(configPath, "utf8") : `{}
`;
  const eol = detectEol(configText);
  const configData = parseJsonc(configText, path.basename(configPath));
  const existingMcp = configData.mcp && typeof configData.mcp === "object" ? configData.mcp : {};
  const added = [];
  const skipped = [];
  const updated = [];
  for (const [name, entry] of mcpEntries) {
    const exists = Object.prototype.hasOwnProperty.call(existingMcp, name);
    if (exists && !options.force) {
      skipped.push(name);
      continue;
    }
    const edits = import_jsonc_parser.modify(configText, ["mcp", name], entry, {
      formattingOptions: {
        insertSpaces: true,
        tabSize: 2,
        eol
      }
    });
    if (edits.length) {
      configText = import_jsonc_parser.applyEdits(configText, edits);
    }
    if (exists) {
      updated.push(name);
    } else {
      added.push(name);
    }
  }
  if (added.length || updated.length) {
    const normalized = configText.endsWith(eol) ? configText : `${configText}${eol}`;
    fs.writeFileSync(configPath, normalized, "utf8");
    console.log(`Updated ${path.basename(configPath)}.`);
  } else {
    console.log(`No changes needed in ${path.basename(configPath)}.`);
  }
  if (!options.keep) {
    const payloadDir = path.join(cwd, ".opencode", "mcp");
    const appliedDir = path.join(payloadDir, ".applied");
    ensureDir(appliedDir);
    for (const filePath of payloadFiles) {
      const relative = path.relative(payloadDir, filePath);
      if (relative.startsWith("..") || relative.startsWith(`.${path.sep}`)) {
        continue;
      }
      if (relative.startsWith(`.applied${path.sep}`)) {
        continue;
      }
      const baseName = path.basename(filePath);
      let target = path.join(appliedDir, baseName);
      if (fs.existsSync(target)) {
        const stamp = Date.now();
        target = path.join(appliedDir, `${baseName}.${stamp}`);
      }
      fs.renameSync(filePath, target);
    }
  }
  if (added.length) {
    console.log(`Added MCP servers: ${added.join(", ")}`);
  }
  if (updated.length) {
    console.log(`Updated MCP servers: ${updated.join(", ")}`);
  }
  if (skipped.length) {
    console.log(`Skipped existing MCP servers: ${skipped.join(", ")}`);
  }
}
try {
  main();
} catch (error) {
  const message = error instanceof Error ? error.message : String(error);
  console.error(`MCP merge failed: ${message}`);
  process.exit(1);
}
9:T1d8be,<pre class="shiki vitesse-light" style="background-color:#ffffff;color:#393a34" tabindex="0"><code><span class="line"><span style="color:#A0ADA0">#!/usr/bin/env node</span></span>
<span class="line"><span style="color:#1E754F">import</span><span style="color:#999999"> {</span><span style="color:#B07D48"> createRequire</span><span style="color:#999999"> }</span><span style="color:#1E754F"> from</span><span style="color:#B5695977"> "</span><span style="color:#B56959">node:module</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> __create</span><span style="color:#999999"> =</span><span style="color:#B07D48"> Object</span><span style="color:#999999">.</span><span style="color:#B07D48">create</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> __getProtoOf</span><span style="color:#999999"> =</span><span style="color:#B07D48"> Object</span><span style="color:#999999">.</span><span style="color:#B07D48">getPrototypeOf</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> __defProp</span><span style="color:#999999"> =</span><span style="color:#B07D48"> Object</span><span style="color:#999999">.</span><span style="color:#B07D48">defineProperty</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> __getOwnPropNames</span><span style="color:#999999"> =</span><span style="color:#B07D48"> Object</span><span style="color:#999999">.</span><span style="color:#B07D48">getOwnPropertyNames</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> __hasOwnProp</span><span style="color:#999999"> =</span><span style="color:#998418"> Object</span><span style="color:#999999">.</span><span style="color:#998418">prototype</span><span style="color:#999999">.</span><span style="color:#B07D48">hasOwnProperty</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#59873A"> __toESM</span><span style="color:#999999"> =</span><span style="color:#999999"> (</span><span style="color:#B07D48">mod</span><span style="color:#999999">,</span><span style="color:#B07D48"> isNodeMode</span><span style="color:#999999">,</span><span style="color:#B07D48"> target</span><span style="color:#999999">)</span><span style="color:#999999"> =></span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">  target</span><span style="color:#999999"> =</span><span style="color:#B07D48"> mod</span><span style="color:#AB5959"> !=</span><span style="color:#AB5959"> null</span><span style="color:#AB5959"> ?</span><span style="color:#59873A"> __create</span><span style="color:#999999">(</span><span style="color:#59873A">__getProtoOf</span><span style="color:#999999">(</span><span style="color:#B07D48">mod</span><span style="color:#999999">))</span><span style="color:#AB5959"> :</span><span style="color:#999999"> {};</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> to</span><span style="color:#999999"> =</span><span style="color:#B07D48"> isNodeMode</span><span style="color:#AB5959"> ||</span><span style="color:#AB5959"> !</span><span style="color:#B07D48">mod</span><span style="color:#AB5959"> ||</span><span style="color:#AB5959"> !</span><span style="color:#B07D48">mod</span><span style="color:#999999">.</span><span style="color:#B07D48">__esModule</span><span style="color:#AB5959"> ?</span><span style="color:#59873A"> __defProp</span><span style="color:#999999">(</span><span style="color:#B07D48">target</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">default</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#999999"> {</span><span style="color:#998418"> value</span><span style="color:#999999">:</span><span style="color:#B07D48"> mod</span><span style="color:#999999">,</span><span style="color:#998418"> enumerable</span><span style="color:#999999">:</span><span style="color:#1E754F"> true</span><span style="color:#999999"> })</span><span style="color:#AB5959"> :</span><span style="color:#B07D48"> target</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">  for</span><span style="color:#999999"> (</span><span style="color:#AB5959">let</span><span style="color:#B07D48"> key</span><span style="color:#AB5959"> of</span><span style="color:#59873A"> __getOwnPropNames</span><span style="color:#999999">(</span><span style="color:#B07D48">mod</span><span style="color:#999999">))</span></span>
<span class="line"><span style="color:#1E754F">    if</span><span style="color:#999999"> (</span><span style="color:#AB5959">!</span><span style="color:#B07D48">__hasOwnProp</span><span style="color:#999999">.</span><span style="color:#59873A">call</span><span style="color:#999999">(</span><span style="color:#B07D48">to</span><span style="color:#999999">,</span><span style="color:#B07D48"> key</span><span style="color:#999999">))</span></span>
<span class="line"><span style="color:#59873A">      __defProp</span><span style="color:#999999">(</span><span style="color:#B07D48">to</span><span style="color:#999999">,</span><span style="color:#B07D48"> key</span><span style="color:#999999">,</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#59873A">        get</span><span style="color:#999999">:</span><span style="color:#999999"> ()</span><span style="color:#999999"> =></span><span style="color:#B07D48"> mod</span><span style="color:#999999">[</span><span style="color:#B07D48">key</span><span style="color:#999999">],</span></span>
<span class="line"><span style="color:#998418">        enumerable</span><span style="color:#999999">:</span><span style="color:#1E754F"> true</span></span>
<span class="line"><span style="color:#999999">      });</span></span>
<span class="line"><span style="color:#1E754F">  return</span><span style="color:#B07D48"> to</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">};</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#59873A"> __commonJS</span><span style="color:#999999"> =</span><span style="color:#999999"> (</span><span style="color:#B07D48">cb</span><span style="color:#999999">,</span><span style="color:#B07D48"> mod</span><span style="color:#999999">)</span><span style="color:#999999"> =></span><span style="color:#999999"> ()</span><span style="color:#999999"> =></span><span style="color:#999999"> (</span><span style="color:#B07D48">mod</span><span style="color:#AB5959"> ||</span><span style="color:#59873A"> cb</span><span style="color:#999999">((</span><span style="color:#B07D48">mod</span><span style="color:#999999"> =</span><span style="color:#999999"> {</span><span style="color:#998418"> exports</span><span style="color:#999999">:</span><span style="color:#999999"> {}</span><span style="color:#999999"> }).</span><span style="color:#B07D48">exports</span><span style="color:#999999">,</span><span style="color:#B07D48"> mod</span><span style="color:#999999">),</span><span style="color:#B07D48"> mod</span><span style="color:#999999">.</span><span style="color:#B07D48">exports</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> __require</span><span style="color:#999999"> =</span><span style="color:#A0ADA0"> /* @__PURE__ */</span><span style="color:#59873A"> createRequire</span><span style="color:#999999">(</span><span style="color:#1E754F">import</span><span style="color:#999999">.</span><span style="color:#998418">meta</span><span style="color:#999999">.</span><span style="color:#B07D48">url</span><span style="color:#999999">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0">// node_modules/.bun/jsonc-parser@3.3.1/node_modules/jsonc-parser/lib/umd/main.js</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> require_main</span><span style="color:#999999"> =</span><span style="color:#59873A"> __commonJS</span><span style="color:#999999">((</span><span style="color:#B07D48">exports</span><span style="color:#999999">,</span><span style="color:#B07D48"> module</span><span style="color:#999999">)</span><span style="color:#999999"> =></span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#999999">  (</span><span style="color:#AB5959">function</span><span style="color:#999999">(</span><span style="color:#B07D48">factory</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">    if</span><span style="color:#999999"> (</span><span style="color:#AB5959">typeof</span><span style="color:#998418"> module</span><span style="color:#AB5959"> ===</span><span style="color:#B5695977"> "</span><span style="color:#B56959">object</span><span style="color:#B5695977">"</span><span style="color:#AB5959"> &#x26;&#x26;</span><span style="color:#AB5959"> typeof</span><span style="color:#998418"> module</span><span style="color:#999999">.</span><span style="color:#998418">exports</span><span style="color:#AB5959"> ===</span><span style="color:#B5695977"> "</span><span style="color:#B56959">object</span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">      var</span><span style="color:#B07D48"> v</span><span style="color:#999999"> =</span><span style="color:#59873A"> factory</span><span style="color:#999999">(</span><span style="color:#B07D48">__require</span><span style="color:#999999">,</span><span style="color:#998418"> exports</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">      if</span><span style="color:#999999"> (</span><span style="color:#B07D48">v</span><span style="color:#AB5959"> !==</span><span style="color:#AB5959"> undefined</span><span style="color:#999999">)</span></span>
<span class="line"><span style="color:#998418">        module</span><span style="color:#999999">.</span><span style="color:#998418">exports</span><span style="color:#999999"> =</span><span style="color:#B07D48"> v</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    }</span><span style="color:#1E754F"> else</span><span style="color:#1E754F"> if</span><span style="color:#999999"> (</span><span style="color:#AB5959">typeof</span><span style="color:#B07D48"> define</span><span style="color:#AB5959"> ===</span><span style="color:#B5695977"> "</span><span style="color:#B56959">function</span><span style="color:#B5695977">"</span><span style="color:#AB5959"> &#x26;&#x26;</span><span style="color:#B07D48"> define</span><span style="color:#999999">.</span><span style="color:#B07D48">amd</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#59873A">      define</span><span style="color:#999999">([</span><span style="color:#B5695977">"</span><span style="color:#B56959">require</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">exports</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">./impl/format</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">./impl/edit</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">./impl/scanner</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">./impl/parser</span><span style="color:#B5695977">"</span><span style="color:#999999">],</span><span style="color:#B07D48"> factory</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#999999">  })(</span><span style="color:#AB5959">function</span><span style="color:#999999">(</span><span style="color:#B07D48">require2</span><span style="color:#999999">,</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">    Object</span><span style="color:#999999">.</span><span style="color:#59873A">defineProperty</span><span style="color:#999999">(</span><span style="color:#B07D48">exports2</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">__esModule</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#999999"> {</span><span style="color:#998418"> value</span><span style="color:#999999">:</span><span style="color:#1E754F"> true</span><span style="color:#999999"> });</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">applyEdits</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">modify</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">format</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">printParseErrorCode</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">ParseErrorCode</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">stripComments</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">visit</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">getNodeValue</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">getNodePath</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">findNodeAtOffset</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">findNodeAtLocation</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">parseTree</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">parse</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">getLocation</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">SyntaxKind</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">ScanError</span><span style="color:#999999"> =</span><span style="color:#B07D48"> exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">createScanner</span><span style="color:#999999"> =</span><span style="color:#AB5959"> undefined</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">    const</span><span style="color:#B07D48"> formatter</span><span style="color:#999999"> =</span><span style="color:#59873A"> require2</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">./impl/format</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">    const</span><span style="color:#B07D48"> edit</span><span style="color:#999999"> =</span><span style="color:#59873A"> require2</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">./impl/edit</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">    const</span><span style="color:#B07D48"> scanner</span><span style="color:#999999"> =</span><span style="color:#59873A"> require2</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">./impl/scanner</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">    const</span><span style="color:#B07D48"> parser</span><span style="color:#999999"> =</span><span style="color:#59873A"> require2</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">./impl/parser</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">createScanner</span><span style="color:#999999"> =</span><span style="color:#B07D48"> scanner</span><span style="color:#999999">.</span><span style="color:#B07D48">createScanner</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">    var</span><span style="color:#B07D48"> ScanError</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    (</span><span style="color:#AB5959">function</span><span style="color:#999999">(</span><span style="color:#B07D48">ScanError2</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">      ScanError2</span><span style="color:#999999">[</span><span style="color:#B07D48">ScanError2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">None</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 0</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">None</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ScanError2</span><span style="color:#999999">[</span><span style="color:#B07D48">ScanError2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">UnexpectedEndOfComment</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 1</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">UnexpectedEndOfComment</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ScanError2</span><span style="color:#999999">[</span><span style="color:#B07D48">ScanError2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">UnexpectedEndOfString</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 2</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">UnexpectedEndOfString</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ScanError2</span><span style="color:#999999">[</span><span style="color:#B07D48">ScanError2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">UnexpectedEndOfNumber</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 3</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">UnexpectedEndOfNumber</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ScanError2</span><span style="color:#999999">[</span><span style="color:#B07D48">ScanError2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">InvalidUnicode</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 4</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidUnicode</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ScanError2</span><span style="color:#999999">[</span><span style="color:#B07D48">ScanError2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">InvalidEscapeCharacter</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 5</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidEscapeCharacter</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ScanError2</span><span style="color:#999999">[</span><span style="color:#B07D48">ScanError2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">InvalidCharacter</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 6</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidCharacter</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    })(</span><span style="color:#B07D48">ScanError</span><span style="color:#AB5959"> ||</span><span style="color:#999999"> (</span><span style="color:#B07D48">exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">ScanError</span><span style="color:#999999"> =</span><span style="color:#B07D48"> ScanError</span><span style="color:#999999"> =</span><span style="color:#999999"> {}));</span></span>
<span class="line"><span style="color:#AB5959">    var</span><span style="color:#B07D48"> SyntaxKind</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    (</span><span style="color:#AB5959">function</span><span style="color:#999999">(</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">OpenBraceToken</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 1</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">OpenBraceToken</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">CloseBraceToken</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 2</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">CloseBraceToken</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">OpenBracketToken</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 3</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">OpenBracketToken</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">CloseBracketToken</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 4</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">CloseBracketToken</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">CommaToken</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 5</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">CommaToken</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">ColonToken</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 6</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">ColonToken</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">NullKeyword</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 7</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">NullKeyword</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">TrueKeyword</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 8</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">TrueKeyword</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">FalseKeyword</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 9</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">FalseKeyword</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">StringLiteral</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 10</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">StringLiteral</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">NumericLiteral</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 11</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">NumericLiteral</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">LineCommentTrivia</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 12</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">LineCommentTrivia</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">BlockCommentTrivia</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 13</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">BlockCommentTrivia</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">LineBreakTrivia</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 14</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">LineBreakTrivia</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">Trivia</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 15</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">Trivia</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">Unknown</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 16</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">Unknown</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B07D48">SyntaxKind2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">EOF</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 17</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">EOF</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    })(</span><span style="color:#B07D48">SyntaxKind</span><span style="color:#AB5959"> ||</span><span style="color:#999999"> (</span><span style="color:#B07D48">exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">SyntaxKind</span><span style="color:#999999"> =</span><span style="color:#B07D48"> SyntaxKind</span><span style="color:#999999"> =</span><span style="color:#999999"> {}));</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">getLocation</span><span style="color:#999999"> =</span><span style="color:#B07D48"> parser</span><span style="color:#999999">.</span><span style="color:#B07D48">getLocation</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">parse</span><span style="color:#999999"> =</span><span style="color:#B07D48"> parser</span><span style="color:#999999">.</span><span style="color:#B07D48">parse</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">parseTree</span><span style="color:#999999"> =</span><span style="color:#B07D48"> parser</span><span style="color:#999999">.</span><span style="color:#B07D48">parseTree</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">findNodeAtLocation</span><span style="color:#999999"> =</span><span style="color:#B07D48"> parser</span><span style="color:#999999">.</span><span style="color:#B07D48">findNodeAtLocation</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">findNodeAtOffset</span><span style="color:#999999"> =</span><span style="color:#B07D48"> parser</span><span style="color:#999999">.</span><span style="color:#B07D48">findNodeAtOffset</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">getNodePath</span><span style="color:#999999"> =</span><span style="color:#B07D48"> parser</span><span style="color:#999999">.</span><span style="color:#B07D48">getNodePath</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">getNodeValue</span><span style="color:#999999"> =</span><span style="color:#B07D48"> parser</span><span style="color:#999999">.</span><span style="color:#B07D48">getNodeValue</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">visit</span><span style="color:#999999"> =</span><span style="color:#B07D48"> parser</span><span style="color:#999999">.</span><span style="color:#B07D48">visit</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">stripComments</span><span style="color:#999999"> =</span><span style="color:#B07D48"> parser</span><span style="color:#999999">.</span><span style="color:#B07D48">stripComments</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">    var</span><span style="color:#B07D48"> ParseErrorCode</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    (</span><span style="color:#AB5959">function</span><span style="color:#999999">(</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">InvalidSymbol</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 1</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidSymbol</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">InvalidNumberFormat</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 2</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidNumberFormat</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">PropertyNameExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 3</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">PropertyNameExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">ValueExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 4</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">ValueExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">ColonExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 5</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">ColonExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">CommaExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 6</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">CommaExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">CloseBraceExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 7</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">CloseBraceExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">CloseBracketExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 8</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">CloseBracketExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">EndOfFileExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 9</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">EndOfFileExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">InvalidCommentToken</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 10</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidCommentToken</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">UnexpectedEndOfComment</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 11</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">UnexpectedEndOfComment</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">UnexpectedEndOfString</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 12</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">UnexpectedEndOfString</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">UnexpectedEndOfNumber</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 13</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">UnexpectedEndOfNumber</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">InvalidUnicode</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 14</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidUnicode</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">InvalidEscapeCharacter</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 15</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidEscapeCharacter</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">      ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B07D48">ParseErrorCode2</span><span style="color:#999999">[</span><span style="color:#B5695977">"</span><span style="color:#B56959">InvalidCharacter</span><span style="color:#B5695977">"</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#2F798A"> 16</span><span style="color:#999999">]</span><span style="color:#999999"> =</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidCharacter</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    })(</span><span style="color:#B07D48">ParseErrorCode</span><span style="color:#AB5959"> ||</span><span style="color:#999999"> (</span><span style="color:#B07D48">exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">ParseErrorCode</span><span style="color:#999999"> =</span><span style="color:#B07D48"> ParseErrorCode</span><span style="color:#999999"> =</span><span style="color:#999999"> {}));</span></span>
<span class="line"><span style="color:#AB5959">    function</span><span style="color:#59873A"> printParseErrorCode</span><span style="color:#999999">(</span><span style="color:#B07D48">code</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">      switch</span><span style="color:#999999"> (</span><span style="color:#B07D48">code</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 1</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidSymbol</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 2</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidNumberFormat</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 3</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">PropertyNameExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 4</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">ValueExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 5</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">ColonExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 6</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">CommaExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 7</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">CloseBraceExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 8</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">CloseBracketExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 9</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">EndOfFileExpected</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 10</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidCommentToken</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 11</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">UnexpectedEndOfComment</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 12</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">UnexpectedEndOfString</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 13</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">UnexpectedEndOfNumber</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 14</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidUnicode</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 15</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidEscapeCharacter</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        case</span><span style="color:#2F798A"> 16</span><span style="color:#999999">:</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">InvalidCharacter</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">      }</span></span>
<span class="line"><span style="color:#1E754F">      return</span><span style="color:#B5695977"> "</span><span style="color:#B56959">&#x3C;unknown ParseErrorCode></span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">printParseErrorCode</span><span style="color:#999999"> =</span><span style="color:#B07D48"> printParseErrorCode</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">    function</span><span style="color:#59873A"> format</span><span style="color:#999999">(</span><span style="color:#B07D48">documentText</span><span style="color:#999999">,</span><span style="color:#B07D48"> range</span><span style="color:#999999">,</span><span style="color:#B07D48"> options</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">      return</span><span style="color:#B07D48"> formatter</span><span style="color:#999999">.</span><span style="color:#59873A">format</span><span style="color:#999999">(</span><span style="color:#B07D48">documentText</span><span style="color:#999999">,</span><span style="color:#B07D48"> range</span><span style="color:#999999">,</span><span style="color:#B07D48"> options</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">format</span><span style="color:#999999"> =</span><span style="color:#B07D48"> format</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">    function</span><span style="color:#59873A"> modify</span><span style="color:#999999">(</span><span style="color:#B07D48">text</span><span style="color:#999999">,</span><span style="color:#B07D48"> path</span><span style="color:#999999">,</span><span style="color:#B07D48"> value</span><span style="color:#999999">,</span><span style="color:#B07D48"> options</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">      return</span><span style="color:#B07D48"> edit</span><span style="color:#999999">.</span><span style="color:#59873A">setProperty</span><span style="color:#999999">(</span><span style="color:#B07D48">text</span><span style="color:#999999">,</span><span style="color:#B07D48"> path</span><span style="color:#999999">,</span><span style="color:#B07D48"> value</span><span style="color:#999999">,</span><span style="color:#B07D48"> options</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">modify</span><span style="color:#999999"> =</span><span style="color:#B07D48"> modify</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">    function</span><span style="color:#59873A"> applyEdits</span><span style="color:#999999">(</span><span style="color:#B07D48">text</span><span style="color:#999999">,</span><span style="color:#B07D48"> edits</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">      let</span><span style="color:#B07D48"> sortedEdits</span><span style="color:#999999"> =</span><span style="color:#B07D48"> edits</span><span style="color:#999999">.</span><span style="color:#59873A">slice</span><span style="color:#999999">(</span><span style="color:#2F798A">0</span><span style="color:#999999">).</span><span style="color:#59873A">sort</span><span style="color:#999999">((</span><span style="color:#B07D48">a</span><span style="color:#999999">,</span><span style="color:#B07D48"> b</span><span style="color:#999999">)</span><span style="color:#999999"> =></span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">        const</span><span style="color:#B07D48"> diff</span><span style="color:#999999"> =</span><span style="color:#B07D48"> a</span><span style="color:#999999">.</span><span style="color:#B07D48">offset</span><span style="color:#AB5959"> -</span><span style="color:#B07D48"> b</span><span style="color:#999999">.</span><span style="color:#B07D48">offset</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">        if</span><span style="color:#999999"> (</span><span style="color:#B07D48">diff</span><span style="color:#AB5959"> ===</span><span style="color:#2F798A"> 0</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">          return</span><span style="color:#B07D48"> a</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#AB5959"> -</span><span style="color:#B07D48"> b</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">        }</span></span>
<span class="line"><span style="color:#1E754F">        return</span><span style="color:#B07D48"> diff</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">      });</span></span>
<span class="line"><span style="color:#AB5959">      let</span><span style="color:#B07D48"> lastModifiedOffset</span><span style="color:#999999"> =</span><span style="color:#B07D48"> text</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">      for</span><span style="color:#999999"> (</span><span style="color:#AB5959">let</span><span style="color:#B07D48"> i</span><span style="color:#999999"> =</span><span style="color:#B07D48"> sortedEdits</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#AB5959"> -</span><span style="color:#2F798A"> 1</span><span style="color:#999999">;</span><span style="color:#B07D48">i</span><span style="color:#999999"> >=</span><span style="color:#2F798A"> 0</span><span style="color:#999999">;</span><span style="color:#B07D48"> i</span><span style="color:#AB5959">--</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">        let</span><span style="color:#B07D48"> e</span><span style="color:#999999"> =</span><span style="color:#B07D48"> sortedEdits</span><span style="color:#999999">[</span><span style="color:#B07D48">i</span><span style="color:#999999">];</span></span>
<span class="line"><span style="color:#1E754F">        if</span><span style="color:#999999"> (</span><span style="color:#B07D48">e</span><span style="color:#999999">.</span><span style="color:#B07D48">offset</span><span style="color:#AB5959"> +</span><span style="color:#B07D48"> e</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999"> &#x3C;=</span><span style="color:#B07D48"> lastModifiedOffset</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">          text</span><span style="color:#999999"> =</span><span style="color:#B07D48"> edit</span><span style="color:#999999">.</span><span style="color:#59873A">applyEdit</span><span style="color:#999999">(</span><span style="color:#B07D48">text</span><span style="color:#999999">,</span><span style="color:#B07D48"> e</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">        }</span><span style="color:#1E754F"> else</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">          throw</span><span style="color:#AB5959"> new</span><span style="color:#59873A"> Error</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">Overlapping edit</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">        }</span></span>
<span class="line"><span style="color:#B07D48">        lastModifiedOffset</span><span style="color:#999999"> =</span><span style="color:#B07D48"> e</span><span style="color:#999999">.</span><span style="color:#B07D48">offset</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">      }</span></span>
<span class="line"><span style="color:#1E754F">      return</span><span style="color:#B07D48"> text</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#B07D48">    exports2</span><span style="color:#999999">.</span><span style="color:#B07D48">applyEdits</span><span style="color:#999999"> =</span><span style="color:#B07D48"> applyEdits</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">  });</span></span>
<span class="line"><span style="color:#999999">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0">// scripts/merge-mcp.ts</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> import_jsonc_parser</span><span style="color:#999999"> =</span><span style="color:#59873A"> __toESM</span><span style="color:#999999">(</span><span style="color:#59873A">require_main</span><span style="color:#999999">(),</span><span style="color:#2F798A"> 1</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">import</span><span style="color:#B07D48"> fs</span><span style="color:#1E754F"> from</span><span style="color:#B5695977"> "</span><span style="color:#B56959">node:fs</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">import</span><span style="color:#B07D48"> path</span><span style="color:#1E754F"> from</span><span style="color:#B5695977"> "</span><span style="color:#B56959">node:path</span><span style="color:#B5695977">"</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> args</span><span style="color:#999999"> =</span><span style="color:#B07D48"> process</span><span style="color:#999999">.</span><span style="color:#B07D48">argv</span><span style="color:#999999">.</span><span style="color:#59873A">slice</span><span style="color:#999999">(</span><span style="color:#2F798A">2</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> options</span><span style="color:#999999"> =</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#998418">  keep</span><span style="color:#999999">:</span><span style="color:#1E754F"> false</span><span style="color:#999999">,</span></span>
<span class="line"><span style="color:#998418">  force</span><span style="color:#999999">:</span><span style="color:#1E754F"> false</span></span>
<span class="line"><span style="color:#999999">};</span></span>
<span class="line"><span style="color:#AB5959">var</span><span style="color:#B07D48"> payloadArgs</span><span style="color:#999999"> =</span><span style="color:#999999"> [];</span></span>
<span class="line"><span style="color:#1E754F">for</span><span style="color:#999999"> (</span><span style="color:#AB5959">const</span><span style="color:#B07D48"> arg</span><span style="color:#AB5959"> of</span><span style="color:#B07D48"> args</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#B07D48">arg</span><span style="color:#AB5959"> ===</span><span style="color:#B5695977"> "</span><span style="color:#B56959">--keep</span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">    options</span><span style="color:#999999">.</span><span style="color:#B07D48">keep</span><span style="color:#999999"> =</span><span style="color:#1E754F"> true</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">    continue</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#B07D48">arg</span><span style="color:#AB5959"> ===</span><span style="color:#B5695977"> "</span><span style="color:#B56959">--force</span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">    options</span><span style="color:#999999">.</span><span style="color:#B07D48">force</span><span style="color:#999999"> =</span><span style="color:#1E754F"> true</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">    continue</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#B07D48">arg</span><span style="color:#999999">.</span><span style="color:#59873A">startsWith</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">-</span><span style="color:#B5695977">"</span><span style="color:#999999">))</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">    console</span><span style="color:#999999">.</span><span style="color:#59873A">error</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">Unknown option: </span><span style="color:#1E754F">${</span><span style="color:#B56959">arg</span><span style="color:#1E754F">}</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#B07D48">    process</span><span style="color:#999999">.</span><span style="color:#59873A">exit</span><span style="color:#999999">(</span><span style="color:#2F798A">1</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#B07D48">  payloadArgs</span><span style="color:#999999">.</span><span style="color:#59873A">push</span><span style="color:#999999">(</span><span style="color:#B07D48">arg</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">}</span></span>
<span class="line"><span style="color:#AB5959">function</span><span style="color:#59873A"> detectEol</span><span style="color:#999999">(</span><span style="color:#B07D48">text</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">  return</span><span style="color:#B07D48"> text</span><span style="color:#999999">.</span><span style="color:#59873A">includes</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#A65E2B">\r</span></span>
<span class="line"><span style="color:#B5695977">`</span><span style="color:#999999">)</span><span style="color:#AB5959"> ?</span><span style="color:#B5695977"> `</span><span style="color:#A65E2B">\r</span></span>
<span class="line"><span style="color:#B5695977">`</span><span style="color:#AB5959"> :</span><span style="color:#B5695977"> `</span></span>
<span class="line"><span style="color:#B5695977">`</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">}</span></span>
<span class="line"><span style="color:#AB5959">function</span><span style="color:#59873A"> parseJsonc</span><span style="color:#999999">(</span><span style="color:#B07D48">text</span><span style="color:#999999">,</span><span style="color:#B07D48"> label</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> errors</span><span style="color:#999999"> =</span><span style="color:#999999"> [];</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> data</span><span style="color:#999999"> =</span><span style="color:#B07D48"> import_jsonc_parser</span><span style="color:#999999">.</span><span style="color:#59873A">parse</span><span style="color:#999999">(</span><span style="color:#B07D48">text</span><span style="color:#999999">,</span><span style="color:#B07D48"> errors</span><span style="color:#999999">,</span><span style="color:#999999"> {</span><span style="color:#998418"> allowTrailingComma</span><span style="color:#999999">:</span><span style="color:#1E754F"> true</span><span style="color:#999999">,</span><span style="color:#998418"> disallowComments</span><span style="color:#999999">:</span><span style="color:#1E754F"> false</span><span style="color:#999999"> });</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#B07D48">errors</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">    const</span><span style="color:#B07D48"> first</span><span style="color:#999999"> =</span><span style="color:#B07D48"> errors</span><span style="color:#999999">[</span><span style="color:#2F798A">0</span><span style="color:#999999">];</span></span>
<span class="line"><span style="color:#1E754F">    throw</span><span style="color:#AB5959"> new</span><span style="color:#59873A"> Error</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">Failed to parse </span><span style="color:#1E754F">${</span><span style="color:#B56959">label</span><span style="color:#1E754F">}</span><span style="color:#B56959"> at offset </span><span style="color:#1E754F">${</span><span style="color:#B56959">first</span><span style="color:#999999">.</span><span style="color:#B56959">offset</span><span style="color:#1E754F">}</span><span style="color:#B56959">.</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#AB5959">!</span><span style="color:#B07D48">data</span><span style="color:#AB5959"> ||</span><span style="color:#AB5959"> typeof</span><span style="color:#B07D48"> data</span><span style="color:#AB5959"> !==</span><span style="color:#B5695977"> "</span><span style="color:#B56959">object</span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">    throw</span><span style="color:#AB5959"> new</span><span style="color:#59873A"> Error</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">Expected </span><span style="color:#1E754F">${</span><span style="color:#B56959">label</span><span style="color:#1E754F">}</span><span style="color:#B56959"> to be an object.</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#1E754F">  return</span><span style="color:#B07D48"> data</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">}</span></span>
<span class="line"><span style="color:#AB5959">function</span><span style="color:#59873A"> readPayload</span><span style="color:#999999">(</span><span style="color:#B07D48">filePath</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> raw</span><span style="color:#999999"> =</span><span style="color:#B07D48"> fs</span><span style="color:#999999">.</span><span style="color:#59873A">readFileSync</span><span style="color:#999999">(</span><span style="color:#B07D48">filePath</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">utf8</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> data</span><span style="color:#999999"> =</span><span style="color:#59873A"> parseJsonc</span><span style="color:#999999">(</span><span style="color:#B07D48">raw</span><span style="color:#999999">,</span><span style="color:#B07D48"> filePath</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">  return</span><span style="color:#B07D48"> data</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">}</span></span>
<span class="line"><span style="color:#AB5959">function</span><span style="color:#59873A"> resolvePayloads</span><span style="color:#999999">(</span><span style="color:#B07D48">cwd</span><span style="color:#999999">,</span><span style="color:#B07D48"> explicit</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#B07D48">explicit</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">    return</span><span style="color:#B07D48"> explicit</span><span style="color:#999999">.</span><span style="color:#59873A">map</span><span style="color:#999999">((</span><span style="color:#B07D48">item</span><span style="color:#999999">)</span><span style="color:#999999"> =></span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">resolve</span><span style="color:#999999">(</span><span style="color:#B07D48">cwd</span><span style="color:#999999">,</span><span style="color:#B07D48"> item</span><span style="color:#999999">));</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> payloadDir</span><span style="color:#999999"> =</span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B07D48">cwd</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">.opencode</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">mcp</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#AB5959">!</span><span style="color:#B07D48">fs</span><span style="color:#999999">.</span><span style="color:#59873A">existsSync</span><span style="color:#999999">(</span><span style="color:#B07D48">payloadDir</span><span style="color:#999999">))</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">    return</span><span style="color:#999999"> [];</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> entries</span><span style="color:#999999"> =</span><span style="color:#B07D48"> fs</span><span style="color:#999999">.</span><span style="color:#59873A">readdirSync</span><span style="color:#999999">(</span><span style="color:#B07D48">payloadDir</span><span style="color:#999999">,</span><span style="color:#999999"> {</span><span style="color:#998418"> withFileTypes</span><span style="color:#999999">:</span><span style="color:#1E754F"> true</span><span style="color:#999999"> });</span></span>
<span class="line"><span style="color:#1E754F">  return</span><span style="color:#B07D48"> entries</span><span style="color:#999999">.</span><span style="color:#59873A">filter</span><span style="color:#999999">((</span><span style="color:#B07D48">entry</span><span style="color:#999999">)</span><span style="color:#999999"> =></span><span style="color:#B07D48"> entry</span><span style="color:#999999">.</span><span style="color:#59873A">isFile</span><span style="color:#999999">()</span><span style="color:#AB5959"> &#x26;&#x26;</span><span style="color:#999999"> (</span><span style="color:#B07D48">entry</span><span style="color:#999999">.</span><span style="color:#B07D48">name</span><span style="color:#999999">.</span><span style="color:#59873A">endsWith</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">.json</span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#AB5959"> ||</span><span style="color:#B07D48"> entry</span><span style="color:#999999">.</span><span style="color:#B07D48">name</span><span style="color:#999999">.</span><span style="color:#59873A">endsWith</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">.jsonc</span><span style="color:#B5695977">"</span><span style="color:#999999">))).</span><span style="color:#59873A">map</span><span style="color:#999999">((</span><span style="color:#B07D48">entry</span><span style="color:#999999">)</span><span style="color:#999999"> =></span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B07D48">payloadDir</span><span style="color:#999999">,</span><span style="color:#B07D48"> entry</span><span style="color:#999999">.</span><span style="color:#B07D48">name</span><span style="color:#999999">));</span></span>
<span class="line"><span style="color:#999999">}</span></span>
<span class="line"><span style="color:#AB5959">function</span><span style="color:#59873A"> getConfigPath</span><span style="color:#999999">(</span><span style="color:#B07D48">cwd</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> jsoncPath</span><span style="color:#999999"> =</span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B07D48">cwd</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">opencode.jsonc</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#B07D48">fs</span><span style="color:#999999">.</span><span style="color:#59873A">existsSync</span><span style="color:#999999">(</span><span style="color:#B07D48">jsoncPath</span><span style="color:#999999">))</span></span>
<span class="line"><span style="color:#1E754F">    return</span><span style="color:#B07D48"> jsoncPath</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#1E754F">  return</span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B07D48">cwd</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">opencode.json</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">}</span></span>
<span class="line"><span style="color:#AB5959">function</span><span style="color:#59873A"> ensureDir</span><span style="color:#999999">(</span><span style="color:#B07D48">dirPath</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">  fs</span><span style="color:#999999">.</span><span style="color:#59873A">mkdirSync</span><span style="color:#999999">(</span><span style="color:#B07D48">dirPath</span><span style="color:#999999">,</span><span style="color:#999999"> {</span><span style="color:#998418"> recursive</span><span style="color:#999999">:</span><span style="color:#1E754F"> true</span><span style="color:#999999"> });</span></span>
<span class="line"><span style="color:#999999">}</span></span>
<span class="line"><span style="color:#AB5959">function</span><span style="color:#59873A"> main</span><span style="color:#999999">()</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> cwd</span><span style="color:#999999"> =</span><span style="color:#B07D48"> process</span><span style="color:#999999">.</span><span style="color:#59873A">cwd</span><span style="color:#999999">();</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> payloadFiles</span><span style="color:#999999"> =</span><span style="color:#59873A"> resolvePayloads</span><span style="color:#999999">(</span><span style="color:#B07D48">cwd</span><span style="color:#999999">,</span><span style="color:#B07D48"> payloadArgs</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#AB5959">!</span><span style="color:#B07D48">payloadFiles</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">    console</span><span style="color:#999999">.</span><span style="color:#59873A">log</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">No MCP payloads found. Nothing to merge.</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">    return</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> payloads</span><span style="color:#999999"> =</span><span style="color:#B07D48"> payloadFiles</span><span style="color:#999999">.</span><span style="color:#59873A">map</span><span style="color:#999999">((</span><span style="color:#B07D48">filePath</span><span style="color:#999999">)</span><span style="color:#999999"> =></span><span style="color:#999999"> ({</span><span style="color:#B07D48"> filePath</span><span style="color:#999999">,</span><span style="color:#998418"> payload</span><span style="color:#999999">:</span><span style="color:#59873A"> readPayload</span><span style="color:#999999">(</span><span style="color:#B07D48">filePath</span><span style="color:#999999">)</span><span style="color:#999999"> }));</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> mcpEntries</span><span style="color:#999999"> =</span><span style="color:#999999"> [];</span></span>
<span class="line"><span style="color:#1E754F">  for</span><span style="color:#999999"> (</span><span style="color:#AB5959">const</span><span style="color:#999999"> {</span><span style="color:#B07D48"> filePath</span><span style="color:#999999">,</span><span style="color:#B07D48"> payload</span><span style="color:#999999"> }</span><span style="color:#AB5959"> of</span><span style="color:#B07D48"> payloads</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">    if</span><span style="color:#999999"> (</span><span style="color:#AB5959">!</span><span style="color:#B07D48">payload</span><span style="color:#999999">.</span><span style="color:#B07D48">mcp</span><span style="color:#AB5959"> ||</span><span style="color:#AB5959"> typeof</span><span style="color:#B07D48"> payload</span><span style="color:#999999">.</span><span style="color:#B07D48">mcp</span><span style="color:#AB5959"> !==</span><span style="color:#B5695977"> "</span><span style="color:#B56959">object</span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">      console</span><span style="color:#999999">.</span><span style="color:#59873A">warn</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">Skipping </span><span style="color:#1E754F">${</span><span style="color:#B56959">filePath</span><span style="color:#1E754F">}</span><span style="color:#B56959">: missing mcp object.</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">      continue</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#1E754F">    for</span><span style="color:#999999"> (</span><span style="color:#AB5959">const</span><span style="color:#999999"> [</span><span style="color:#B07D48">name</span><span style="color:#999999">,</span><span style="color:#B07D48"> entry</span><span style="color:#999999">]</span><span style="color:#AB5959"> of</span><span style="color:#B07D48"> Object</span><span style="color:#999999">.</span><span style="color:#59873A">entries</span><span style="color:#999999">(</span><span style="color:#B07D48">payload</span><span style="color:#999999">.</span><span style="color:#B07D48">mcp</span><span style="color:#999999">))</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">      if</span><span style="color:#999999"> (</span><span style="color:#AB5959">!</span><span style="color:#B07D48">entry</span><span style="color:#AB5959"> ||</span><span style="color:#AB5959"> typeof</span><span style="color:#B07D48"> entry</span><span style="color:#AB5959"> !==</span><span style="color:#B5695977"> "</span><span style="color:#B56959">object</span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">        console</span><span style="color:#999999">.</span><span style="color:#59873A">warn</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">Skipping </span><span style="color:#1E754F">${</span><span style="color:#B56959">filePath</span><span style="color:#1E754F">}</span><span style="color:#B56959">: mcp.</span><span style="color:#1E754F">${</span><span style="color:#B56959">name</span><span style="color:#1E754F">}</span><span style="color:#B56959"> is not an object.</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">        continue</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">      }</span></span>
<span class="line"><span style="color:#B07D48">      mcpEntries</span><span style="color:#999999">.</span><span style="color:#59873A">push</span><span style="color:#999999">([</span><span style="color:#B07D48">name</span><span style="color:#999999">,</span><span style="color:#B07D48"> entry</span><span style="color:#999999">]);</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#AB5959">!</span><span style="color:#B07D48">mcpEntries</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">    console</span><span style="color:#999999">.</span><span style="color:#59873A">log</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">No valid MCP entries found. Nothing to merge.</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">    return</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> configPath</span><span style="color:#999999"> =</span><span style="color:#59873A"> getConfigPath</span><span style="color:#999999">(</span><span style="color:#B07D48">cwd</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> configExists</span><span style="color:#999999"> =</span><span style="color:#B07D48"> fs</span><span style="color:#999999">.</span><span style="color:#59873A">existsSync</span><span style="color:#999999">(</span><span style="color:#B07D48">configPath</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">  let</span><span style="color:#B07D48"> configText</span><span style="color:#999999"> =</span><span style="color:#B07D48"> configExists</span><span style="color:#AB5959"> ?</span><span style="color:#B07D48"> fs</span><span style="color:#999999">.</span><span style="color:#59873A">readFileSync</span><span style="color:#999999">(</span><span style="color:#B07D48">configPath</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">utf8</span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#AB5959"> :</span><span style="color:#B5695977"> `</span><span style="color:#B56959">{}</span></span>
<span class="line"><span style="color:#B5695977">`</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> eol</span><span style="color:#999999"> =</span><span style="color:#59873A"> detectEol</span><span style="color:#999999">(</span><span style="color:#B07D48">configText</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> configData</span><span style="color:#999999"> =</span><span style="color:#59873A"> parseJsonc</span><span style="color:#999999">(</span><span style="color:#B07D48">configText</span><span style="color:#999999">,</span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">basename</span><span style="color:#999999">(</span><span style="color:#B07D48">configPath</span><span style="color:#999999">));</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> existingMcp</span><span style="color:#999999"> =</span><span style="color:#B07D48"> configData</span><span style="color:#999999">.</span><span style="color:#B07D48">mcp</span><span style="color:#AB5959"> &#x26;&#x26;</span><span style="color:#AB5959"> typeof</span><span style="color:#B07D48"> configData</span><span style="color:#999999">.</span><span style="color:#B07D48">mcp</span><span style="color:#AB5959"> ===</span><span style="color:#B5695977"> "</span><span style="color:#B56959">object</span><span style="color:#B5695977">"</span><span style="color:#AB5959"> ?</span><span style="color:#B07D48"> configData</span><span style="color:#999999">.</span><span style="color:#B07D48">mcp</span><span style="color:#AB5959"> :</span><span style="color:#999999"> {};</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> added</span><span style="color:#999999"> =</span><span style="color:#999999"> [];</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> skipped</span><span style="color:#999999"> =</span><span style="color:#999999"> [];</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> updated</span><span style="color:#999999"> =</span><span style="color:#999999"> [];</span></span>
<span class="line"><span style="color:#1E754F">  for</span><span style="color:#999999"> (</span><span style="color:#AB5959">const</span><span style="color:#999999"> [</span><span style="color:#B07D48">name</span><span style="color:#999999">,</span><span style="color:#B07D48"> entry</span><span style="color:#999999">]</span><span style="color:#AB5959"> of</span><span style="color:#B07D48"> mcpEntries</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">    const</span><span style="color:#B07D48"> exists</span><span style="color:#999999"> =</span><span style="color:#998418"> Object</span><span style="color:#999999">.</span><span style="color:#998418">prototype</span><span style="color:#999999">.</span><span style="color:#B07D48">hasOwnProperty</span><span style="color:#999999">.</span><span style="color:#59873A">call</span><span style="color:#999999">(</span><span style="color:#B07D48">existingMcp</span><span style="color:#999999">,</span><span style="color:#B07D48"> name</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">    if</span><span style="color:#999999"> (</span><span style="color:#B07D48">exists</span><span style="color:#AB5959"> &#x26;&#x26;</span><span style="color:#AB5959"> !</span><span style="color:#B07D48">options</span><span style="color:#999999">.</span><span style="color:#B07D48">force</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">      skipped</span><span style="color:#999999">.</span><span style="color:#59873A">push</span><span style="color:#999999">(</span><span style="color:#B07D48">name</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">      continue</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#AB5959">    const</span><span style="color:#B07D48"> edits</span><span style="color:#999999"> =</span><span style="color:#B07D48"> import_jsonc_parser</span><span style="color:#999999">.</span><span style="color:#59873A">modify</span><span style="color:#999999">(</span><span style="color:#B07D48">configText</span><span style="color:#999999">,</span><span style="color:#999999"> [</span><span style="color:#B5695977">"</span><span style="color:#B56959">mcp</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B07D48"> name</span><span style="color:#999999">],</span><span style="color:#B07D48"> entry</span><span style="color:#999999">,</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#998418">      formattingOptions</span><span style="color:#999999">:</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#998418">        insertSpaces</span><span style="color:#999999">:</span><span style="color:#1E754F"> true</span><span style="color:#999999">,</span></span>
<span class="line"><span style="color:#998418">        tabSize</span><span style="color:#999999">:</span><span style="color:#2F798A"> 2</span><span style="color:#999999">,</span></span>
<span class="line"><span style="color:#B07D48">        eol</span></span>
<span class="line"><span style="color:#999999">      }</span></span>
<span class="line"><span style="color:#999999">    });</span></span>
<span class="line"><span style="color:#1E754F">    if</span><span style="color:#999999"> (</span><span style="color:#B07D48">edits</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">      configText</span><span style="color:#999999"> =</span><span style="color:#B07D48"> import_jsonc_parser</span><span style="color:#999999">.</span><span style="color:#59873A">applyEdits</span><span style="color:#999999">(</span><span style="color:#B07D48">configText</span><span style="color:#999999">,</span><span style="color:#B07D48"> edits</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#1E754F">    if</span><span style="color:#999999"> (</span><span style="color:#B07D48">exists</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">      updated</span><span style="color:#999999">.</span><span style="color:#59873A">push</span><span style="color:#999999">(</span><span style="color:#B07D48">name</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">    }</span><span style="color:#1E754F"> else</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">      added</span><span style="color:#999999">.</span><span style="color:#59873A">push</span><span style="color:#999999">(</span><span style="color:#B07D48">name</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#B07D48">added</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#AB5959"> ||</span><span style="color:#B07D48"> updated</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">    const</span><span style="color:#B07D48"> normalized</span><span style="color:#999999"> =</span><span style="color:#B07D48"> configText</span><span style="color:#999999">.</span><span style="color:#59873A">endsWith</span><span style="color:#999999">(</span><span style="color:#B07D48">eol</span><span style="color:#999999">)</span><span style="color:#AB5959"> ?</span><span style="color:#B07D48"> configText</span><span style="color:#AB5959"> :</span><span style="color:#B5695977"> `</span><span style="color:#1E754F">${</span><span style="color:#B56959">configText</span><span style="color:#1E754F">}${</span><span style="color:#B56959">eol</span><span style="color:#1E754F">}</span><span style="color:#B5695977">`</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#B07D48">    fs</span><span style="color:#999999">.</span><span style="color:#59873A">writeFileSync</span><span style="color:#999999">(</span><span style="color:#B07D48">configPath</span><span style="color:#999999">,</span><span style="color:#B07D48"> normalized</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">utf8</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#B07D48">    console</span><span style="color:#999999">.</span><span style="color:#59873A">log</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">Updated </span><span style="color:#1E754F">${</span><span style="color:#B56959">path</span><span style="color:#999999">.</span><span style="color:#59873A">basename</span><span style="color:#999999">(</span><span style="color:#B56959">configPath</span><span style="color:#999999">)</span><span style="color:#1E754F">}</span><span style="color:#B56959">.</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">  }</span><span style="color:#1E754F"> else</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">    console</span><span style="color:#999999">.</span><span style="color:#59873A">log</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">No changes needed in </span><span style="color:#1E754F">${</span><span style="color:#B56959">path</span><span style="color:#999999">.</span><span style="color:#59873A">basename</span><span style="color:#999999">(</span><span style="color:#B56959">configPath</span><span style="color:#999999">)</span><span style="color:#1E754F">}</span><span style="color:#B56959">.</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#AB5959">!</span><span style="color:#B07D48">options</span><span style="color:#999999">.</span><span style="color:#B07D48">keep</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">    const</span><span style="color:#B07D48"> payloadDir</span><span style="color:#999999"> =</span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B07D48">cwd</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">.opencode</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">mcp</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">    const</span><span style="color:#B07D48"> appliedDir</span><span style="color:#999999"> =</span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B07D48">payloadDir</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">.applied</span><span style="color:#B5695977">"</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#59873A">    ensureDir</span><span style="color:#999999">(</span><span style="color:#B07D48">appliedDir</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">    for</span><span style="color:#999999"> (</span><span style="color:#AB5959">const</span><span style="color:#B07D48"> filePath</span><span style="color:#AB5959"> of</span><span style="color:#B07D48"> payloadFiles</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">      const</span><span style="color:#B07D48"> relative</span><span style="color:#999999"> =</span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">relative</span><span style="color:#999999">(</span><span style="color:#B07D48">payloadDir</span><span style="color:#999999">,</span><span style="color:#B07D48"> filePath</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">      if</span><span style="color:#999999"> (</span><span style="color:#B07D48">relative</span><span style="color:#999999">.</span><span style="color:#59873A">startsWith</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">..</span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#AB5959"> ||</span><span style="color:#B07D48"> relative</span><span style="color:#999999">.</span><span style="color:#59873A">startsWith</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">.</span><span style="color:#1E754F">${</span><span style="color:#B56959">path</span><span style="color:#999999">.</span><span style="color:#B56959">sep</span><span style="color:#1E754F">}</span><span style="color:#B5695977">`</span><span style="color:#999999">))</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">        continue</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">      }</span></span>
<span class="line"><span style="color:#1E754F">      if</span><span style="color:#999999"> (</span><span style="color:#B07D48">relative</span><span style="color:#999999">.</span><span style="color:#59873A">startsWith</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">.applied</span><span style="color:#1E754F">${</span><span style="color:#B56959">path</span><span style="color:#999999">.</span><span style="color:#B56959">sep</span><span style="color:#1E754F">}</span><span style="color:#B5695977">`</span><span style="color:#999999">))</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#1E754F">        continue</span><span style="color:#999999">;</span></span>
<span class="line"><span style="color:#999999">      }</span></span>
<span class="line"><span style="color:#AB5959">      const</span><span style="color:#B07D48"> baseName</span><span style="color:#999999"> =</span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">basename</span><span style="color:#999999">(</span><span style="color:#B07D48">filePath</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#AB5959">      let</span><span style="color:#B07D48"> target</span><span style="color:#999999"> =</span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B07D48">appliedDir</span><span style="color:#999999">,</span><span style="color:#B07D48"> baseName</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#1E754F">      if</span><span style="color:#999999"> (</span><span style="color:#B07D48">fs</span><span style="color:#999999">.</span><span style="color:#59873A">existsSync</span><span style="color:#999999">(</span><span style="color:#B07D48">target</span><span style="color:#999999">))</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">        const</span><span style="color:#B07D48"> stamp</span><span style="color:#999999"> =</span><span style="color:#B07D48"> Date</span><span style="color:#999999">.</span><span style="color:#59873A">now</span><span style="color:#999999">();</span></span>
<span class="line"><span style="color:#B07D48">        target</span><span style="color:#999999"> =</span><span style="color:#B07D48"> path</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B07D48">appliedDir</span><span style="color:#999999">,</span><span style="color:#B5695977"> `</span><span style="color:#1E754F">${</span><span style="color:#B56959">baseName</span><span style="color:#1E754F">}</span><span style="color:#B56959">.</span><span style="color:#1E754F">${</span><span style="color:#B56959">stamp</span><span style="color:#1E754F">}</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">      }</span></span>
<span class="line"><span style="color:#B07D48">      fs</span><span style="color:#999999">.</span><span style="color:#59873A">renameSync</span><span style="color:#999999">(</span><span style="color:#B07D48">filePath</span><span style="color:#999999">,</span><span style="color:#B07D48"> target</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#B07D48">added</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">    console</span><span style="color:#999999">.</span><span style="color:#59873A">log</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">Added MCP servers: </span><span style="color:#1E754F">${</span><span style="color:#B56959">added</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">, </span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#1E754F">}</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#B07D48">updated</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">    console</span><span style="color:#999999">.</span><span style="color:#59873A">log</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">Updated MCP servers: </span><span style="color:#1E754F">${</span><span style="color:#B56959">updated</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">, </span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#1E754F">}</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#1E754F">  if</span><span style="color:#999999"> (</span><span style="color:#B07D48">skipped</span><span style="color:#999999">.</span><span style="color:#998418">length</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#B07D48">    console</span><span style="color:#999999">.</span><span style="color:#59873A">log</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">Skipped existing MCP servers: </span><span style="color:#1E754F">${</span><span style="color:#B56959">skipped</span><span style="color:#999999">.</span><span style="color:#59873A">join</span><span style="color:#999999">(</span><span style="color:#B5695977">"</span><span style="color:#B56959">, </span><span style="color:#B5695977">"</span><span style="color:#999999">)</span><span style="color:#1E754F">}</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#999999">}</span></span>
<span class="line"><span style="color:#1E754F">try</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#59873A">  main</span><span style="color:#999999">();</span></span>
<span class="line"><span style="color:#999999">}</span><span style="color:#1E754F"> catch</span><span style="color:#999999"> (</span><span style="color:#B07D48">error</span><span style="color:#999999">)</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#AB5959">  const</span><span style="color:#B07D48"> message</span><span style="color:#999999"> =</span><span style="color:#B07D48"> error</span><span style="color:#AB5959"> instanceof</span><span style="color:#2E8F82"> Error</span><span style="color:#AB5959"> ?</span><span style="color:#B07D48"> error</span><span style="color:#999999">.</span><span style="color:#B07D48">message</span><span style="color:#AB5959"> :</span><span style="color:#59873A"> String</span><span style="color:#999999">(</span><span style="color:#B07D48">error</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#B07D48">  console</span><span style="color:#999999">.</span><span style="color:#59873A">error</span><span style="color:#999999">(</span><span style="color:#B5695977">`</span><span style="color:#B56959">MCP merge failed: </span><span style="color:#1E754F">${</span><span style="color:#B56959">message</span><span style="color:#1E754F">}</span><span style="color:#B5695977">`</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#B07D48">  process</span><span style="color:#999999">.</span><span style="color:#59873A">exit</span><span style="color:#999999">(</span><span style="color:#2F798A">1</span><span style="color:#999999">);</span></span>
<span class="line"><span style="color:#999999">}</span></span>
<span class="line"></span></code></pre>a:T835,<pre class="shiki vitesse-light" style="background-color:#ffffff;color:#393a34" tabindex="0"><code><span class="line"><span style="color:#999999">{</span></span>
<span class="line"><span style="color:#99841877">  "</span><span style="color:#998418">mcp</span><span style="color:#99841877">"</span><span style="color:#999999">:</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#99841877">    "</span><span style="color:#998418">next-devtools</span><span style="color:#99841877">"</span><span style="color:#999999">:</span><span style="color:#999999"> {</span></span>
<span class="line"><span style="color:#99841877">      "</span><span style="color:#998418">type</span><span style="color:#99841877">"</span><span style="color:#999999">:</span><span style="color:#B5695977"> "</span><span style="color:#B56959">local</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span></span>
<span class="line"><span style="color:#99841877">      "</span><span style="color:#998418">command</span><span style="color:#99841877">"</span><span style="color:#999999">:</span><span style="color:#999999"> [</span><span style="color:#B5695977">"</span><span style="color:#B56959">npx</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">-y</span><span style="color:#B5695977">"</span><span style="color:#999999">,</span><span style="color:#B5695977"> "</span><span style="color:#B56959">next-devtools-mcp@latest</span><span style="color:#B5695977">"</span><span style="color:#999999">],</span></span>
<span class="line"><span style="color:#99841877">      "</span><span style="color:#998418">enabled</span><span style="color:#99841877">"</span><span style="color:#999999">:</span><span style="color:#1E754F"> true</span></span>
<span class="line"><span style="color:#999999">    }</span></span>
<span class="line"><span style="color:#999999">  }</span></span>
<span class="line"><span style="color:#999999">}</span></span>
<span class="line"></span></code></pre>4:["$","div",null,{"className":"space-y-6","children":["$","$L7",null,{"opencodeVariant":{"$schema":"https://ui.shadcn.com/schema/registry-item.json","name":"nextjs-mcp-opencode","type":"registry:item","title":"Next.js MCP (OpenCode)","description":"Merge the Next.js DevTools MCP server into opencode.json/jsonc.","meta":{"concept":"nextjs-mcp","platform":"opencode","kind":["mcp","config","script"],"postInstall":"node .opencode/bin/merge-mcp.mjs"},"files":[{"path":"registry/nextjs-mcp/opencode/.opencode/bin/merge-mcp.mjs","type":"registry:file","target":"~/.opencode/bin/merge-mcp.mjs"},{"path":"registry/nextjs-mcp/opencode/.opencode/mcp/next-devtools.json","type":"registry:file","target":"~/.opencode/mcp/next-devtools.json"}],"docs":"After install, run `node .opencode/bin/merge-mcp.mjs` to merge the MCP config into opencode.json/jsonc. Requires Next.js 16+. The merge script archives payloads in .opencode/mcp/.applied to avoid re-adding removed MCPs."},"basePath":"","codeBlocks":[{"id":"registry-nextjs-mcp-opencode--opencode-bin-merge-mcp-mjs","label":"merge-mcp.mjs","path":"registry/nextjs-mcp/opencode/.opencode/bin/merge-mcp.mjs","target":"~/.opencode/bin/merge-mcp.mjs","raw":"$8","html":"$9","language":"js"},{"id":"registry-nextjs-mcp-opencode--opencode-mcp-next-devtools-json","label":"next-devtools.json","path":"registry/nextjs-mcp/opencode/.opencode/mcp/next-devtools.json","target":"~/.opencode/mcp/next-devtools.json","raw":"{\n  \"mcp\": {\n    \"next-devtools\": {\n      \"type\": \"local\",\n      \"command\": [\"npx\", \"-y\", \"next-devtools-mcp@latest\"],\n      \"enabled\": true\n    }\n  }\n}\n","html":"$a","language":"json"}]}]}]
5:["$","script","script-0",{"src":"/_next/static/chunks/ab30cffd95057725.js","async":true}]
6:["$","$Lb",null,{"children":["$","$c",null,{"name":"Next.MetadataOutlet","children":"$@d"}]}]
d:null
